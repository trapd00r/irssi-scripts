<html><head><title>Guide To Irssi Scripting.</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="podstyle" type="text/css" href="podstyle.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010001 at Fri Jul 16 19:43:32 2010 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#LOADING_AND_UNLOADING_SCRIPTS'>LOADING AND UNLOADING SCRIPTS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#File_Locations'>File Locations</a>
    <li class='indexItem indexItem2'><a href='#Testing'>Testing</a>
    <li class='indexItem indexItem2'><a href='#Loading'>Loading</a>
    <li class='indexItem indexItem2'><a href='#Unloading'>Unloading</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#ANATOMY_OF_A_SCRIPT'>ANATOMY OF A SCRIPT</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Preamble'>Preamble</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#COMMONLY_SCRIPTED_TASKS'>COMMONLY SCRIPTED TASKS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Modifying_an_input_line_before_sending'>Modifying an input line before sending</a>
    <li class='indexItem indexItem2'><a href='#Responding_to_a_public_message'>Responding to a public message</a>
    <li class='indexItem indexItem2'><a href='#Responding_to_a_private_message'>Responding to a private message</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#USEFUL_THINGS'>USEFUL THINGS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Sharing_Code_Between_Scripts'>Sharing Code Between Scripts</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Using_Signals'>Using Signals</a>
      <li class='indexItem indexItem3'><a href='#Using_Functions'>Using Functions</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#If_In_Doubt%2C_Dump!'>If In Doubt, Dump!</a>
    <li class='indexItem indexItem2'><a href='#Making_Scripts_Act_Native'>Making Scripts Act Native</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Provide_Help'>Provide Help</a>
      <li class='indexItem indexItem3'><a href='#Use_Tab_Completion'>Use Tab Completion</a>
      <li class='indexItem indexItem3'><a href='#Use_Settings_for_Customisation'>Use Settings for Customisation</a>
      <li class='indexItem indexItem3'><a href='#Use_Subcommands_to_Group_Script_Functionality'>Use Subcommands to Group Script Functionality</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#OTHER_RESOURCES'>OTHER RESOURCES</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Guide To Irssi Scripting.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LOADING_AND_UNLOADING_SCRIPTS"
>LOADING AND UNLOADING SCRIPTS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="File_Locations"
>File Locations</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Testing"
>Testing</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Loading"
>Loading</a></h2>

<p>Scripts are loaded via <code>/SCRIPT LOAD <i>filename</i></code>.
A default Irssi configuration also provides the <code>/RUN</code> alias as an alternative to <code>/SCRIPT LOAD</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Unloading"
>Unloading</a></h2>

<p>A script can be unloaded via the <code>/SCRIPT UNLOAD <i>name</i></code> command.
The name is typically the script filename without the <em>.pl</em> extension,
so <em>nickcolor.pl</em> becomes <code>/SCRIPT UNLOAD nickcolor</code>.</p>

<p>As part of the unloading process,
if the script contains a</p>

<pre>    sub UNLOAD {
        ...
    }</pre>

<p>function, it will be run just before the script is unloaded and all variables destroyed. This can be used to clean up any temporary files, shut down any network connections or processes, and restore any Irssi modifications made.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ANATOMY_OF_A_SCRIPT"
>ANATOMY OF A SCRIPT</a></h1>

<p>In this section, we develop a very simplistic script and look at the necessary code.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Preamble"
>Preamble</a></h2>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COMMONLY_SCRIPTED_TASKS"
>COMMONLY SCRIPTED TASKS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Modifying_an_input_line_before_sending"
>Modifying an input line before sending</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Responding_to_a_public_message"
>Responding to a public message</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Responding_to_a_private_message"
>Responding to a private message</a></h2>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USEFUL_THINGS"
>USEFUL THINGS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Sharing_Code_Between_Scripts"
>Sharing Code Between Scripts</a></h2>

<p>There are 2 main ways for scripts to communicate, either via emitting and handling Irssi signals, or by calling functions from one another directly.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Using_Signals"
>Using Signals</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Using_Functions"
>Using Functions</a></h3>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="If_In_Doubt,_Dump!"
>If In Doubt, Dump!</a></h2>

<p><code>Data::Dumper</code> is an extremely good way to inspect Irssi internals if you&#39;re looking for an undocumented feature.</p>

<p>The <code>DUMP</code> alias by <a href="http://wouter.coekaerts.be/site/irssi/aliases" class="podlinkurl"
>Wouter Coekaerts</a> provides an easy way to check object fields.</p>

<p>Dump perl object (e.g. <code>/dump Irssi::active_win</code>):</p>

<pre>    /alias DUMP script exec use Data::Dumper\; print Data::Dumper-&#62;new([\\$0-])-&#62;Dump</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Making_Scripts_Act_Native"
>Making Scripts Act Native</a></h2>

<p>An important part of creating a good script is to make it behave as though it were a part of Irssi. Adhering to some of the standard conventions can make this easier.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Provide_Help"
>Provide Help</a></h3>

<p>Scripts commonly store information about how to use them in comments at the top of their file. Whilst better than no documentation at all, a preferable approach is to allow that help to be accessed from within Irssi itself, using the <code>/HELP</code> command.</p>

<p><b>TODO: how</b></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Use_Tab_Completion"
>Use Tab Completion</a></h3>

<p>One of the great features of Irssi is the ability to complete commands, subcommands and even certain arguments.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Use_Settings_for_Customisation"
>Use Settings for Customisation</a></h3>

<p><b>TODO: why?</b></p>

<p><b>TODO: different types of settings</b></p>

<p><b>TODO: register/set/get</b></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Use_Subcommands_to_Group_Script_Functionality"
>Use Subcommands to Group Script Functionality</a></h3>

<p>A common theme in Irssi scripts is to define commands with a prefix, such as <code>/myscript_foo</code>, <code>myscript_bar</code>, etc. This helps to avoid accidentally clobbering native commands and those defined by other scripts, but is a problem better solved with <i>subcommands</i>.</p>

<p>Subcommands allow you to bind commands such as <code>/myscript foo</code> and <code>/myscript bar</code>. Completions are automatically handled for both the primary command, and any subcommands contained within it.</p>

<p>The following example demonstrates how to use subcommands from within a script:</p>

<pre>    Irssi::command_bind(&#34;foo bar&#34;, \&#38;subcmd_bar);
    Irssi::command_bind(&#34;foo&#34;, \&#38;subcmd_handler);

    sub subcmd_handler {
        my ($data, $server, $item) = @_;
        $data =~ s/\s+$//g;
        Irssi::command_runsub(&#39;foo&#39;, $data, $server, $item);
    }

    sub subcmd_bar {
        my ($args) = @_;
        print &#34;subcommand called with: $args&#34;;
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OTHER_RESOURCES"
>OTHER RESOURCES</a></h1>

<p>The documentation assembled here and elsewhere on this site has been drawn from many different places, and a lot of valuable information is available from the following sites.</p>

<dl>
<dt><a name="http://irssi.org/documentation/perl"
><a href="http://irssi.org/documentation/perl" class="podlinkurl"
>http://irssi.org/documentation/perl</a>
<dt><a name="http://irssi.org/documentation/signals"
><a href="http://irssi.org/documentation/signals" class="podlinkurl"
>http://irssi.org/documentation/signals</a>
<dt><a name="http://irssi.org/documentation/special_vars"
><a href="http://irssi.org/documentation/special_vars" class="podlinkurl"
>http://irssi.org/documentation/special_vars</a>
<dt><a name="http://irssi.org/documentation/formats"
><a href="http://irssi.org/documentation/formats" class="podlinkurl"
>http://irssi.org/documentation/formats</a>
<dt><a name="http://irssi.org/documentation/settings"
><a href="http://irssi.org/documentation/settings" class="podlinkurl"
>http://irssi.org/documentation/settings</a>
<dt><a name="http://juerd.nl/site.plp/irssiscripttut"
><a href="http://juerd.nl/site.plp/irssiscripttut" class="podlinkurl"
>http://juerd.nl/site.plp/irssiscripttut</a>
<dt><a name="http://irchelp.org/irchelp/rfc/rfc.html"
><a href="http://irchelp.org/irchelp/rfc/rfc.html" class="podlinkurl"
>http://irchelp.org/irchelp/rfc/rfc.html</a>
<dt><a name="http://wouter.coekaerts.be/site/irssi/irssi"
><a href="http://wouter.coekaerts.be/site/irssi/irssi" class="podlinkurl"
>http://wouter.coekaerts.be/site/irssi/irssi</a></a></dt>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
