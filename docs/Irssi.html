<html><head><title>Irssi.pm</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="podstyle" type="text/css" href="podstyle.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010001 at Sat Jul 10 00:38:08 2010 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASSES'>CLASSES</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Accessors'>Accessors</a>
    <li class='indexItem indexItem2'><a href='#Signals'>Signals</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Handling_Signals'>Handling Signals</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_add(%24sig_name%2C_%24func)'>signal_add($sig_name, $func)</a>
        <li class='indexItem indexItem4'><a href='#signal_add_first(%24sig_name%2C_%24func)'>signal_add_first($sig_name, $func)</a>
        <li class='indexItem indexItem4'><a href='#signal_add_last(signal%2C_func)'>signal_add_last(signal, func)</a>
        <li class='indexItem indexItem4'><a href='#signal_remove(signal%2C_func)'>signal_remove(signal, func)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Controlling_Signal_Propagation'>Controlling Signal Propagation</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_emit(signal%2C_...)'>signal_emit(signal, ...)</a>
        <li class='indexItem indexItem4'><a href='#signal_continue(...)'>signal_continue(...)</a>
        <li class='indexItem indexItem4'><a href='#signal_stop()'>signal_stop()</a>
        <li class='indexItem indexItem4'><a href='#signal_stop_by_name(signal)'>signal_stop_by_name(signal)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Registering_New_Signals'>Registering New Signals</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_register(%25hashref)'>signal_register(%hashref)</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Commands'>Commands</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Registering_Commands'>Registering Commands</a>
      <li class='indexItem indexItem3'><a href='#Invoking_Commands'>Invoking Commands</a>
      <li class='indexItem indexItem3'><a href='#Parsing_Command_Arguments'>Parsing Command Arguments</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Settings'>Settings</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Creating_New_Settings'>Creating New Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_add_str(section%2C_key%2C_def)'>settings_add_str(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_int(section%2C_key%2C_def)'>settings_add_int(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_bool(section%2C_key%2C_def)'>settings_add_bool(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_time(section%2C_key%2C_def)'>settings_add_time(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_level(section%2C_key%2C_def)'>settings_add_level(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_size(section%2C_key%2C_def)'>settings_add_size(section, key, def)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Retrieving_Settings'>Retrieving Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_get_str(%24key)'>settings_get_str($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_int(%24key)'>settings_get_int($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_bool(%24key)'>settings_get_bool($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_time(%24key)'>settings_get_time($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_level(%24key)'>settings_get_level($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_size(%24key)'>settings_get_size($key)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Modifying_Settings'>Modifying Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_set_str(key%2C_value)'>settings_set_str(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_int(key%2C_value)'>settings_set_int(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_bool(key%2C_value)'>settings_set_bool(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_time(key%2C_value)'>settings_set_time(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_level(key%2C_value)'>settings_set_level(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_size(key%2C_value)'>settings_set_size(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_remove(key)'>settings_remove(key)</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#IO_and_Process_Management'>IO and Process Management</a>
    <li class='indexItem indexItem2'><a href='#Message_Levels'>Message Levels</a>
    <li class='indexItem indexItem2'><a href='#Themes'>Themes</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Irssi.pm</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASSES"
>CLASSES</a></h1>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Accessors"
>Accessors</a></h2>

<dl>
<dt><a name="Irssi::active_win_--_returns_the_currently_active_Irssi::Window_object."
><code>Irssi::active_win</code> -- returns the currently active <a href="./Irssi/Window.html" class="podlinkpod"
>Irssi::Window</a> object.
<dt><a name="Window_active_win()_-_return_active_window"
>Window active_win() - return active window
<dt><a name="Server_active_server()_-_return_server_in_active_window"
>Server active_server() - return server in active window
<dt><a 
>windows() - return list of all windows =item servers() - return list of all servers =item reconnects() - return list of all server reconnections =item channels() - return list of all channels
<dt><a name="queries()_-_return_list_of_all_queries"
>queries() - return list of all queries
<dt><a name="commands()_-_return_list_of_all_commands"
>commands() - return list of all commands
<dt><a name="logs()_-_return_list_of_all_log_files"
>logs() - return list of all log files
<dt><a name="ignores()_-_returns_list_of_all_ignores"
>ignores() - returns list of all ignores</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Signals"
>Signals</a></h2>

<p>Irssi is pretty much based on sending and handling different signals.
Like when you receive a message from server,
say:</p>

<p><code>:nick!user@there.org PRIVMSG you :blahblah</code></p>

<p>Irssi will first send a signal:</p>

<p><code>&#34;server incoming&#34;,
SERVER_REC,
&#34;nick!user@there PRIVMSG ...&#34;</code></p>

<p>You probably don&#39;t want to use this signal.
Default handler for this signal interprets the header and sends a signal:</p>

<p><code>&#34;server event&#34;,
SERVER_REC,
&#34;PRIVMSG ...&#34;,
&#34;nick&#34;,
&#34;user@there.org&#34;</code></p>

<p>You probably don&#39;t want to use this either,
since this signal&#39;s default handler parses the event string and sends a signal:</p>

<p><code>&#34;event privmsg&#34;,
SERVER_REC,
&#34;you :blahblah&#34;,
&#34;nick&#34;,
&#34;user@there.org&#34;</code></p>

<p>You can at any point grab the signal,
do whatever you want to do with it and optionally stop it from going any further by calling <a href="./Irssi.html#signal_stop" class="podlinkpod"
>Irssi::signal_stop()</a></p>

<p>For example:</p>

<pre>    sub event_privmsg {
        # $data = &#34;nick/#channel :text&#34;
        my ($server, $data, $nick, $address) = @_;
        my ($target, $text) = split(/ :/, $data, 2);

        Irssi::signal_stop() if ($text =~ /free.*porn/ || $nick =~ /idiot/);
    }

    Irssi::signal_add(&#34;event privmsg&#34;, &#34;event_privmsg&#34;);</pre>

<p>This will hide all public or private messages that match the regexp <code>&#34;free.*porn&#34;</code> or the sender&#39;s nick contain the word &#34;idiot&#34;. Yes, you could use /IGNORE instead for both of these <code>:)</code></p>

<p>You can also use <a href="#signal_add_last" class="podlinkpod"
><code>signal_add_last()</code></a> if you wish to let the Irssi&#39;s internal functions be run before yours.</p>

<p>A list of signals that irssi sends can be found in the <a href="./Signals.html" class="podlinkpod"
>Signals</a> documentation.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Handling_Signals"
>Handling Signals</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add($sig_name,_$func)"
><code>signal_add($sig_name, $func)</code></a></h4>

<p>Bind <code>$sig_name</code>&#39; to function <code>$func</code>. The <code>$func</code> argument may be either a string containing the name of a function to call, or a coderef.</p>

<p>For example:</p>

<pre>    Irssi::signal_add(&#34;default command&#34;, sub { ... });

    Irssi::signal_add(&#34;default command&#34;, &#34;my_function&#34;);

    Irssi::signal_add(&#34;default command&#34;, \&#38;my_function);</pre>

<p>In all cases, the specified function will be passed arguments in <code>@_</code> as specified in <a href="./Signals.html" class="podlinkpod"
>Signals</a>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add_first($sig_name,_$func)"
><code>signal_add_first($sig_name, $func)</code></a></h4>

<p>Bind `signal&#39; to function `func&#39;. Call `func&#39; as soon as possible.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add_last(signal,_func)"
><code>signal_add_last(signal, func)</code></a></h4>

<p>Bind `signal&#39; to function `func&#39;. Call `func&#39; as late as possible.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_remove(signal,_func)"
><code>signal_remove(signal, func)</code></a></h4>

<p>Unbind `signal&#39; from function `func&#39;.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Controlling_Signal_Propagation"
>Controlling Signal Propagation</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_emit(signal,_...)"
><code>signal_emit(signal, ...)</code></a></h4>

<p>Send signal `signal&#39;. You can give 6 parameters at maximum.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_continue(...)"
><code>signal_continue(...)</code></a></h4>

<p>Continue currently emitted signal with different parameters.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_stop()"
><code>signal_stop()</code></a></h4>

<p>Stop the signal that&#39;s currently being emitted.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_stop_by_name(signal)"
><code>signal_stop_by_name(signal)</code></a></h4>

<p>Stop the signal with name `signal&#39; that&#39;s currently being emitted.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Registering_New_Signals"
>Registering New Signals</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_register(%hashref)"
><code>signal_register(%hashref)</code></a></h4>

<p>Register parameter types for one or more signals. <code>%hash</code> must map one or more signal names to references to arrays containing 0 to 6 type names. Some recognized type names include int for integers, intptr for references to integers and string for strings. For all standard signals see src/perl/perl-signals-list.h in the source code (this is generated by src/perl/get-signals.pl).</p>

<p>For example:</p>

<pre>    my $signal_config_hash = { &#34;new signal&#34; =&#62; [ qw/string string integer/ ] };
    Irssi::signal_register($signal_config_hash);</pre>

<p>Any signals that were already registered are unaffected.</p>

<p><b>Signals are not persistent.</b> Once registered, a signal cannot be unregistered without restarting Irssi. <b>TODO: True?</b>, including modifying the type signature.</p>

<p>Registration is required to get any parameters to signals written in Perl and to emit and continue signals from Perl.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Commands"
>Commands</a></h2>

<p>See also <a href="./Irssi/Command.html" class="podlinkpod"
>Irssi::Command</a></p>

<p>command_bind(cmd, func[, category]) Bind command `cmd&#39; to call function `func&#39;. `category&#39; is the category where the command is displayed in /HELP.</p>

<p>command_runsub(cmd, data, server, item) Run subcommands for `cmd&#39;. First word in `data&#39; is parsed as subcommand. `server&#39; is Irssi::Server rec for current Irssi::Windowitem `item&#39;.</p>

<pre>  Call command_runsub in handler function for `cmd&#39; and bind
  with command_bind(&#34;`cmd&#39; `subcmd&#39;&#34;, subcmdfunc[, category]);</pre>

<p>command_unbind(cmd, func) Unbind command `cmd&#39; from function `func&#39;.</p>

<p>command_set_options(cmd, data) Set options for command `cmd&#39; to `data&#39;. `data&#39; is a string of space separated words which specify the options. Each word can be optionally prefixed with one of the following character:</p>

<pre>  &#39;-&#39;: optional argument
  &#39;+&#39;: argument required
  &#39;@&#39;: optional numeric argument</pre>

<p>command_parse_options(cmd, data) Parse options for command `cmd&#39; in `data&#39;. It returns a reference to an hash table with the options and a string with the remaining part of `data&#39;. On error it returns the undefined value.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Registering_Commands"
>Registering Commands</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Invoking_Commands"
>Invoking Commands</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parsing_Command_Arguments"
>Parsing Command Arguments</a></h3>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Settings"
>Settings</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Creating_New_Settings"
>Creating New Settings</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_str(section,_key,_def)"
><code>settings_add_str(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_int(section,_key,_def)"
><code>settings_add_int(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_bool(section,_key,_def)"
><code>settings_add_bool(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_time(section,_key,_def)"
><code>settings_add_time(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_level(section,_key,_def)"
><code>settings_add_level(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_size(section,_key,_def)"
><code>settings_add_size(section, key, def)</code></a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Retrieving_Settings"
>Retrieving Settings</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_str($key)"
><code>settings_get_str($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_int($key)"
><code>settings_get_int($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_bool($key)"
><code>settings_get_bool($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_time($key)"
><code>settings_get_time($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_level($key)"
><code>settings_get_level($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_size($key)"
><code>settings_get_size($key)</code></a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Modifying_Settings"
>Modifying Settings</a></h3>

<p>Set value for setting.</p>

<p><b>If you change the settings of another module/script with one of these, you must emit a <code>&#34;setup changed&#34;</code> signal afterwards.</b></p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_str(key,_value)"
><code>settings_set_str(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_int(key,_value)"
><code>settings_set_int(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_bool(key,_value)"
><code>settings_set_bool(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_time(key,_value)"
><code>settings_set_time(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_level(key,_value)"
><code>settings_set_level(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_size(key,_value)"
><code>settings_set_size(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_remove(key)"
><code>settings_remove(key)</code></a></h4>

<p>Remove a setting.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="IO_and_Process_Management"
>IO and Process Management</a></h2>

<p>timeout_add(msecs, func, data) Call `func&#39; every `msecs&#39; milliseconds (1000 = 1 second) with parameter `data&#39;. Returns tag which can be used to stop the timeout.</p>

<p>timeout_add_once(msecs, func, data); Call `func&#39; once after `msecs&#39; milliseconds (1000 = 1 second) with parameter `data&#39;. Returns tag which can be used to stop the timeout.</p>

<p>timeout_remove(tag) Remove timeout with tag.</p>

<p>input_add(source, condition, func, data) Call `func&#39; with parameter `data&#39; when specified IO happens. `source&#39; is the file handle that is being listened. `condition&#39; can be INPUT_READ, INPUT_WRITE or both. Returns tag which can be used to remove the listener.</p>

<p>input_remove(tag) Remove listener with tag.</p>

<p>pidwait_add(pid) Adds `pid&#39; to the list of processes to wait for. The pid must identify a child process of the irssi process. When the process terminates, a &#34;pidwait&#34; signal will be sent with the pid and the status from waitpid(). This is useful to avoid zombies if your script forks.</p>

<p>pidwait_remove(pid) Removes `pid&#39; from the list of processes to wait for. Terminated processes are removed automatically, so it is usually not necessary to call this function.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Message_Levels"
>Message Levels</a></h2>

<p>level2bits(level) Level string -&#62; number</p>

<p>bits2level(bits) Level number -&#62; string</p>

<p>combine_level(level, str) Combine level number to level string (&#34;+level -level&#34;). Return new level number.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Themes"
>Themes</a></h2>

<p>You can have user configurable texts in scripts that work just like irssi&#39;s internal texts that can be changed in themes.</p>

<p>First you&#39;ll have to register the formats:</p>

<p>Irssi::theme_register([ &#39;format_name&#39;, &#39;{hilight my perl format!}&#39;, &#39;format2&#39;, &#39;testing.. nick = $0, channel = $1&#39; ]);</p>

<p>Printing happens with one of the functions:</p>

<p>printformat(level, format, ...) Window::printformat(level, format, ...) Server::printformat(target, level, format, ...) Windowitem::printformat(level, format, ...)</p>

<p>For example:</p>

<pre>  $channel-&#62;printformat(MSGLEVEL_CRAP, &#39;format2&#39;,
                        &#39;nick&#39;, $channel-&#62;{name});</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>All the content of this site is copyright &#194;&#169; 2000-2010 The Irssi project.</p>

<p>Formatting to POD and linking by Tom Feist <a href="mailto:shabble+irssi@metavore.org" class="podlinkurl"
>shabble+irssi@metavore.org</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
