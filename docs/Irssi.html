<html><head><title>Irssi.pm</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="podstyle" type="text/css" href="podstyle.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010001 at Wed Jul 14 23:07:05 2010 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASSES'>CLASSES</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Accessors'>Accessors</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#active_win'>active_win</a>
      <li class='indexItem indexItem3'><a href='#active_server'>active_server</a>
      <li class='indexItem indexItem3'><a href='#windows'>windows</a>
      <li class='indexItem indexItem3'><a href='#servers'>servers</a>
      <li class='indexItem indexItem3'><a href='#reconnects'>reconnects</a>
      <li class='indexItem indexItem3'><a href='#channels'>channels</a>
      <li class='indexItem indexItem3'><a href='#queries'>queries</a>
      <li class='indexItem indexItem3'><a href='#commands'>commands</a>
      <li class='indexItem indexItem3'><a href='#logs'>logs</a>
      <li class='indexItem indexItem3'><a href='#ignores'>ignores</a>
      <li class='indexItem indexItem3'><a href='#dccs'>dccs</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Signals'>Signals</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Handling_Signals'>Handling Signals</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_add_%24sig_name%2C_%24func'>signal_add $sig_name, $func</a>
        <li class='indexItem indexItem4'><a href='#signal_add_first_%24sig_name%2C_%24func'>signal_add_first $sig_name, $func</a>
        <li class='indexItem indexItem4'><a href='#signal_add_last_%24sig_name%2C_%24func'>signal_add_last $sig_name, $func</a>
        <li class='indexItem indexItem4'><a href='#signal_remove_%24sig_name%2C_%24func'>signal_remove $sig_name, $func</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Controlling_Signal_Propagation'>Controlling Signal Propagation</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_emit_%24sig_name%2C_%40params'>signal_emit $sig_name, @params</a>
        <li class='indexItem indexItem4'><a href='#signal_continue_%40params'>signal_continue @params</a>
        <li class='indexItem indexItem4'><a href='#signal_stop'>signal_stop</a>
        <li class='indexItem indexItem4'><a href='#signal_stop_by_name_%24sig_name'>signal_stop_by_name $sig_name</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Registering_New_Signals'>Registering New Signals</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#signal_register_%24hashref'>signal_register $hashref</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Commands'>Commands</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Registering_Commands'>Registering Commands</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#command_bind_%24cmd%2C_%24func%2C_%24category'>command_bind $cmd, $func, $category</a>
        <li class='indexItem indexItem4'><a href='#command_runsub_%24cmd%2C_%24data%2C_%24server%2C_%24item'>command_runsub $cmd, $data, $server, $item</a>
        <li class='indexItem indexItem4'><a href='#command_unbind_%24cmd%2C_%24func'>command_unbind $cmd, $func</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Invoking_Commands'>Invoking Commands</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#command_%24string'>command $string</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Parsing_Command_Arguments'>Parsing Command Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#command_set_options_%24cmd%2C_%24data'>command_set_options $cmd, $data</a>
        <li class='indexItem indexItem4'><a href='#command_parse_options_%24cmd%2C_%24data'>command_parse_options $cmd, $data</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Settings'>Settings</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Creating_New_Settings'>Creating New Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_add_str(section%2C_key%2C_def)'>settings_add_str(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_int(section%2C_key%2C_def)'>settings_add_int(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_bool(section%2C_key%2C_def)'>settings_add_bool(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_time(section%2C_key%2C_def)'>settings_add_time(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_level(section%2C_key%2C_def)'>settings_add_level(section, key, def)</a>
        <li class='indexItem indexItem4'><a href='#settings_add_size(section%2C_key%2C_def)'>settings_add_size(section, key, def)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Retrieving_Settings'>Retrieving Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_get_str(%24key)'>settings_get_str($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_int(%24key)'>settings_get_int($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_bool(%24key)'>settings_get_bool($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_time(%24key)'>settings_get_time($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_level(%24key)'>settings_get_level($key)</a>
        <li class='indexItem indexItem4'><a href='#settings_get_size(%24key)'>settings_get_size($key)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Modifying_Settings'>Modifying Settings</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#settings_set_str(key%2C_value)'>settings_set_str(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_int(key%2C_value)'>settings_set_int(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_bool(key%2C_value)'>settings_set_bool(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_time(key%2C_value)'>settings_set_time(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_level(key%2C_value)'>settings_set_level(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_set_size(key%2C_value)'>settings_set_size(key, value)</a>
        <li class='indexItem indexItem4'><a href='#settings_remove(key)'>settings_remove(key)</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#IO_and_Process_Management'>IO and Process Management</a>
    <li class='indexItem indexItem2'><a href='#Message_Levels'>Message Levels</a>
    <li class='indexItem indexItem2'><a href='#Themes'>Themes</a>
    <li class='indexItem indexItem2'><a href='#DCC'>DCC</a>
    <li class='indexItem indexItem2'><a href='#Channels'>Channels</a>
    <li class='indexItem indexItem2'><a href='#Ignores'>Ignores</a>
    <li class='indexItem indexItem2'><a href='#Logging'>Logging</a>
    <li class='indexItem indexItem2'><a href='#Raw_Logging'>Raw Logging</a>
    <li class='indexItem indexItem2'><a href='#Chat-Nets'>Chat-Nets</a>
    <li class='indexItem indexItem2'><a href='#Status_Bars'>Status Bars</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Irssi.pm</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><a href="http://irssi.org" class="podlinkurl"
>Irssi</a> is a console based fullscreen IRC client.
It is written in the C programming language,
and can be modified through both <i>Modules</i> -- dynamically loadable compiled libraries -- and <i>Scripts</i>,
written in <a href="http://perl.org" class="podlinkurl"
>Perl</a>.</p>

<p>Modules are not covered in this documentation,
other than to note that Perl scripting support itself may be compiled as a module rather than built directly into Irssi.
The <code>/LOAD</code> command can be used from within Irssi to check if Perl support is available.
If not,
refer to the <em>INSTALL</em> file for how to recompile irssi.</p>

<p>The <code>Irssi</code> package is the basis of Perl scripting in Irssi.
It does not export any functions,
and requires that all function-calls be fully qualified with the <code>Irssi::<i>cmd</i></code> prefix.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASSES"
>CLASSES</a></h1>

<p>This documentation has been split into a number of pages,
each documenting a particular class or pseudo-class.
The following list contains all of these additional pages.</p>

<dl>
<dt><a name="Irssi::Ban"
><a href="./Irssi/Ban.html" class="podlinkpod"
>Irssi::Ban</a>
<dt><a name="Irssi::Chatnet"
><a href="./Irssi/Chatnet.html" class="podlinkpod"
>Irssi::Chatnet</a>
<dt><a name="Irssi::Chatnet"
><a href="./Irssi/Chatnet.html" class="podlinkpod"
>Irssi::Chatnet</a>
<dt><a name="Irssi::Client"
><a href="./Irssi/Client.html" class="podlinkpod"
>Irssi::Client</a>
<dt><a name="Irssi::Command"
><a href="./Irssi/Command.html" class="podlinkpod"
>Irssi::Command</a>
<dt><a name="Irssi::Dcc"
><a href="./Irssi/Dcc.html" class="podlinkpod"
>Irssi::Dcc</a>
<dt><a name="Irssi::Ignore"
><a href="./Irssi/Ignore.html" class="podlinkpod"
>Irssi::Ignore</a>
<dt><a name="Irssi::Log"
><a href="./Irssi/Log.html" class="podlinkpod"
>Irssi::Log</a>
<dt><a name="Irssi::Logitem"
><a href="./Irssi/Logitem.html" class="podlinkpod"
>Irssi::Logitem</a>
<dt><a name="Irssi::Nick"
><a href="./Irssi/Nick.html" class="podlinkpod"
>Irssi::Nick</a>
<dt><a name="Irssi::Notifylist"
><a href="./Irssi/Notifylist.html" class="podlinkpod"
>Irssi::Notifylist</a>
<dt><a name="Irssi::Process"
><a href="./Irssi/Process.html" class="podlinkpod"
>Irssi::Process</a>
<dt><a name="Irssi::Query"
><a href="./Irssi/Query.html" class="podlinkpod"
>Irssi::Query</a>
<dt><a name="Irssi::Rawlog"
><a href="./Irssi/Rawlog.html" class="podlinkpod"
>Irssi::Rawlog</a>
<dt><a name="Irssi::Reconnect"
><a href="./Irssi/Reconnect.html" class="podlinkpod"
>Irssi::Reconnect</a>
<dt><a name="Irssi::Script"
><a href="./Irssi/Script.html" class="podlinkpod"
>Irssi::Script</a>
<dt><a name="Irssi::Server"
><a href="./Irssi/Server.html" class="podlinkpod"
>Irssi::Server</a>
<dt><a name="Irssi::Theme"
><a href="./Irssi/Theme.html" class="podlinkpod"
>Irssi::Theme</a>
<dt><a name="Irssi::Window"
><a href="./Irssi/Window.html" class="podlinkpod"
>Irssi::Window</a>
<dt><a name="Irssi::Windowitem"
><a href="./Irssi/Windowitem.html" class="podlinkpod"
>Irssi::Windowitem</a></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Accessors"
>Accessors</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="active_win"
>active_win</a></h3>

<p><code>my $win = Irssi::active_win();</code></p>

<p>returns the currently active <a href="./Irssi/Window.html" class="podlinkpod"
>Irssi::Window</a></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="active_server"
>active_server</a></h3>

<p><code>my $server = Irssi::active_server();</code></p>

<p>returns the currently active <a href="./Irssi/Server.html" class="podlinkpod"
>Irssi::Server</a> in active window.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="windows"
>windows</a></h3>

<p>returns a list of all <a href="./Irssi/Window.html" class="podlinkpod"
>windows</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="servers"
>servers</a></h3>

<p>returns a list of all <a href="./Irssi/Server.html" class="podlinkpod"
>servers</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="reconnects"
>reconnects</a></h3>

<p>returns a list of all <a href="./Irssi/Reconnect.html" class="podlinkpod"
>server reconnections</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="channels"
>channels</a></h3>

<p>returns a list of all <a href="./Irssi/Channel.html" class="podlinkpod"
>channels</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="queries"
>queries</a></h3>

<p>returns a list of all <a href="./Irssi/Query.html" class="podlinkpod"
>queries</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="commands"
>commands</a></h3>

<p>returns a list of all <a href="./Irssi/Command.html" class="podlinkpod"
>commands</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="logs"
>logs</a></h3>

<p>returns a list of all <a href="./Irssi/Log.html" class="podlinkpod"
>log files</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="ignores"
>ignores</a></h3>

<p>returns a list of all <a href="./Irssi/Ignore.html" class="podlinkpod"
>ignores</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="dccs"
>dccs</a></h3>

<p>returns a list of all <a href="./Irssi/Dcc.html" class="podlinkpod"
>DCC connections</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Signals"
>Signals</a></h2>

<p>See also <a href="./Signals.html" class="podlinkpod"
>Signals</a></p>

<p>Irssi is pretty much based on sending and handling different signals.
Like when you receive a message from server,
say:</p>

<p><code>:nick!user@there.org PRIVMSG you :blahblah</code></p>

<p>Irssi will first send a signal:</p>

<p><code>&#34;server incoming&#34;,
SERVER_REC,
&#34;nick!user@there PRIVMSG ...&#34;</code></p>

<p>You probably don&#39;t want to use this signal.
Default handler for this signal interprets the header and sends a signal:</p>

<p><code>&#34;server event&#34;,
Irssi::Server,
&#34;PRIVMSG ...&#34;,
&#34;nick&#34;,
&#34;user@there.org&#34;</code></p>

<p>You probably don&#39;t want to use this either,
since this signal&#39;s default handler parses the event string and sends a signal:</p>

<p><code>&#34;event privmsg&#34;,
Irssi::Server,
&#34;you :blahblah&#34;,
&#34;nick&#34;,
&#34;user@there.org&#34;</code></p>

<p>You can at any point grab the signal,
do whatever you want to do with it and optionally stop it from going any further by calling <a href="./Irssi.html#signal_stop" class="podlinkpod"
>Irssi::signal_stop</a></p>

<p>For example:</p>

<pre>    sub event_privmsg {
        # $data = &#34;nick/#channel :text&#34;
        my ($server, $data, $nick, $address) = @_;
        my ($target, $text) = split(/ :/, $data, 2);

        Irssi::signal_stop() if ($text =~ /free.*porn/ || $nick =~ /idiot/);
    }

    Irssi::signal_add(&#34;event privmsg&#34;, &#34;event_privmsg&#34;);</pre>

<p>This will hide all public or private messages that match the regexp <code>&#34;free.*porn&#34;</code> or the sender&#39;s nick contain the word &#34;idiot&#34;. Yes, you could use /IGNORE instead for both of these <code>:)</code></p>

<p>You can also use <a href="#signal_add_last" class="podlinkpod"
>Irssi::signal_add_last</a> if you wish to let the Irssi&#39;s internal functions be run before yours.</p>

<p>A list of signals that irssi sends can be found in the <a href="./Signals.html" class="podlinkpod"
>Signals</a> documentation.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Handling_Signals"
>Handling Signals</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add_$sig_name,_$func"
><code>signal_add $sig_name, $func</code></a></h4>

<p>Bind <code>$sig_name</code> to function <code>$func</code>. The <code>$func</code> argument may be either a string containing the name of a function to call, or a coderef.</p>

<p>For example:</p>

<pre>    Irssi::signal_add(&#34;default command&#34;, sub { ... });

    Irssi::signal_add(&#34;default command&#34;, &#34;my_function&#34;);

    Irssi::signal_add(&#34;default command&#34;, \&#38;my_function);</pre>

<p>In all cases, the specified function will be passed arguments in <code>@_</code> as specified in <a href="./Signals.html" class="podlinkpod"
>Signals</a>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add_first_$sig_name,_$func"
><code>signal_add_first $sig_name, $func</code></a></h4>

<p>Bind <code>$sig_name</code> to function <code>$func</code>. Call <code>$func</code> as soon as possible when the signal is raised.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_add_last_$sig_name,_$func"
><code>signal_add_last $sig_name, $func</code></a></h4>

<p>Bind <code>$sig_name</code> to function <code>$func</code>. Call <code>$func</code> as late as possible (after all other signal handlers).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_remove_$sig_name,_$func"
><code>signal_remove $sig_name, $func</code></a></h4>

<p>Unbind <code>$sig_name</code> from function <code>$func</code>. <b>TODO: Can you unbind a signal from a <code>sub { ...}</code> coderef? What happens?</b></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Controlling_Signal_Propagation"
>Controlling Signal Propagation</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_emit_$sig_name,_@params"
><code>signal_emit $sig_name, @params</code></a></h4>

<p>Send a signal of type <code>$sig_name</code>. Up to 6 parameters can be passed in <code>@params</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_continue_@params"
><code>signal_continue @params</code></a></h4>

<p>Propagate a currently emitted signal, but with different parameters. This only needs to be called if you wish to change them, otherwise all subsequent handlers will be invoked as normal.</p>

<p><b>Should only be called from within a signal handler</b></p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_stop"
><code>signal_stop</code></a></h4>

<p>Stop the signal that&#39;s currently being emitted, no other handlers after this one will be called.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_stop_by_name_$sig_name"
><code>signal_stop_by_name $sig_name</code></a></h4>

<p>Stop the signal with name <code>$sig_name</code> that is currently being emitted.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Registering_New_Signals"
>Registering New Signals</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="signal_register_$hashref"
><code>signal_register $hashref</code></a></h4>

<p>Register parameter types for one or more signals. <code>$hashref</code> must map one or more signal names to references to arrays containing 0 to 6 type names. Some recognized type names include int for integers, intptr for references to integers and string for strings. For all standard signals see <em>src/perl/perl-signals-list.h</em> in the source code (this is generated by <em>src/perl/get-signals.pl</em>).</p>

<p>For example:</p>

<pre>    my $signal_config_hash = { &#34;new signal&#34; =&#62; [ qw/string string integer/ ] };
    Irssi::signal_register($signal_config_hash);</pre>

<p>Any signals that were already registered are unaffected.</p>

<p><b>Signals are not persistent.</b> Once registered, a signal cannot be unregistered without restarting Irssi. <b>TODO: True?</b>, including modifying the type signature.</p>

<p>Registration is required to get any parameters to signals written in Perl and to emit and continue signals from Perl.</p>

<p><b>TODO: What are the complete list of recognised types?</b></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Commands"
>Commands</a></h2>

<p>See also <a href="./Irssi/Command.html" class="podlinkpod"
>Irssi::Command</a></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Registering_Commands"
>Registering Commands</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_bind_$cmd,_$func,_$category"
><code>command_bind $cmd, $func, $category</code></a></h4>

<p>Bind a command string <code>$cmd</code> to call function <code>$func</code>. <code>$func</code> can be either a string or coderef. <code>$category</code> is an optional string specifying the category to display the command in when <code>/HELP</code> is used.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_runsub_$cmd,_$data,_$server,_$item"
><code>command_runsub $cmd, $data, $server, $item</code></a></h4>

<p>Run subcommands for `cmd&#39;. First word in `data&#39; is parsed as subcommand. `server&#39; is <a href="./Irssi/Server.html" class="podlinkpod"
>Irssi::Server</a> record for current <a href="./Irssi/Windowitem.html" class="podlinkpod"
>Irssi::Windowitem</a> `item&#39;.</p>

<p>Call command_runsub in handler function for `cmd&#39; and bind with command_bind(&#34;`cmd&#39; `subcmd&#39;&#34;, subcmdfunc[, category]);</p>

<p><b>TODO: example here</b></p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_unbind_$cmd,_$func"
><code>command_unbind $cmd, $func</code></a></h4>

<p>Unbind command <code>$cmd</code> from function <code>$func</code>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Invoking_Commands"
>Invoking Commands</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_$string"
><code>command $string</code></a></h4>

<p>Run the command specified in <code>$string</code> in the currently active context.</p>

<p><b>TODO: passing args in <code>@_</code> vs concatenating into the command string?</b></p>

<p>See also <a href="./Irssi/Server.html#command_%24string" class="podlinkpod"
>&#34;command $string&#34; in Irssi::Server</a></p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parsing_Command_Arguments"
>Parsing Command Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_set_options_$cmd,_$data"
><code>command_set_options $cmd, $data</code></a></h4>

<p>Set options for command <code>$cmd</code> to <code>$data</code>. <code>$data</code> is a string of space separated words which specify the options. Each word can be optionally prefixed with one of the following character:</p>

<dl>
<dt><a name="-:_optional_argument"
><code>-</code>: optional argument
<dt><a name="@:_optional_numeric_argument"
><code>@</code>: optional numeric argument
<dt><a name="+:_required_argument"
><code>+</code>: required argument</a></dt>
</dl>

<p>For example:</p>

<pre>   my $argument_format = &#34;+something -other -another @number&#34;;
   Irssi::command_set_options(&#39;mycmd&#39;, $argument_format);</pre>

<p>Thus, the command may be run as <code>/mycmd -something value -other value rest of args</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="command_parse_options_$cmd,_$data"
><code>command_parse_options $cmd, $data</code></a></h4>

<p>Parse out options as specified by <a href="#command_set_options_%24cmd%2C_%24data" class="podlinkpod"
>command_set_options</a> for command <code>$cmd</code>. A string containing the input received by the command handler should be passed in as <code>$data</code>.</p>

<p>The return value is either <code>undef</code> if an error occurred, or a list containing two items. The first is a hashref mapping the option names to their values. Optional arguments which were not present in the input will not be included in the hash.</p>

<p>The second item in the return list is a string containing the remainder of the input after the arguments have been parsed out.</p>

<p>For example:</p>

<pre>    sub my_cmd_handler {
        my ($command_args) = @_;
        my @options_list = Irssi::command_parse_options &#34;my_cmd&#34;, $command_args;
        if (@options_list) {
            my $options       = $options_list-&#62;[0];
            my $arg_remainder = $options_list-&#62;[1];

            if (exists $options-&#62;{other} &#38;&#38; $options-&#62;{something} eq &#39;hello&#39;) {

                ...

            }
        }
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Settings"
>Settings</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Creating_New_Settings"
>Creating New Settings</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_str(section,_key,_def)"
><code>settings_add_str(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_int(section,_key,_def)"
><code>settings_add_int(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_bool(section,_key,_def)"
><code>settings_add_bool(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_time(section,_key,_def)"
><code>settings_add_time(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_level(section,_key,_def)"
><code>settings_add_level(section, key, def)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_add_size(section,_key,_def)"
><code>settings_add_size(section, key, def)</code></a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Retrieving_Settings"
>Retrieving Settings</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_str($key)"
><code>settings_get_str($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_int($key)"
><code>settings_get_int($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_bool($key)"
><code>settings_get_bool($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_time($key)"
><code>settings_get_time($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_level($key)"
><code>settings_get_level($key)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_get_size($key)"
><code>settings_get_size($key)</code></a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Modifying_Settings"
>Modifying Settings</a></h3>

<p>Set value for setting.</p>

<p><b>If you change the settings of another module/script with one of these, you must emit a <code>&#34;setup changed&#34;</code> signal afterwards.</b></p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_str(key,_value)"
><code>settings_set_str(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_int(key,_value)"
><code>settings_set_int(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_bool(key,_value)"
><code>settings_set_bool(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_time(key,_value)"
><code>settings_set_time(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_level(key,_value)"
><code>settings_set_level(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_set_size(key,_value)"
><code>settings_set_size(key, value)</code></a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="settings_remove(key)"
><code>settings_remove(key)</code></a></h4>

<p>Remove a setting.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="IO_and_Process_Management"
>IO and Process Management</a></h2>

<p>timeout_add(msecs, func, data) Call `func&#39; every `msecs&#39; milliseconds (1000 = 1 second) with parameter `data&#39;. Returns tag which can be used to stop the timeout.</p>

<p>timeout_add_once(msecs, func, data); Call `func&#39; once after `msecs&#39; milliseconds (1000 = 1 second) with parameter `data&#39;. Returns tag which can be used to stop the timeout.</p>

<p>timeout_remove(tag) Remove timeout with tag.</p>

<p>input_add(source, condition, func, data) Call `func&#39; with parameter `data&#39; when specified IO happens. `source&#39; is the file handle that is being listened. `condition&#39; can be INPUT_READ, INPUT_WRITE or both. Returns tag which can be used to remove the listener.</p>

<p>input_remove(tag) Remove listener with tag.</p>

<p>pidwait_add(pid) Adds `pid&#39; to the list of processes to wait for. The pid must identify a child process of the irssi process. When the process terminates, a &#34;pidwait&#34; signal will be sent with the pid and the status from waitpid(). This is useful to avoid zombies if your script forks.</p>

<p>pidwait_remove(pid) Removes `pid&#39; from the list of processes to wait for. Terminated processes are removed automatically, so it is usually not necessary to call this function.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Message_Levels"
>Message Levels</a></h2>

<p>level2bits(level) Level string -&#62; number</p>

<p>bits2level(bits) Level number -&#62; string</p>

<p>combine_level(level, str) Combine level number to level string (&#34;+level -level&#34;). Return new level number.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Themes"
>Themes</a></h2>

<p>See also <a href="./Irssi/Theme.html" class="podlinkpod"
>Irssi::Theme</a></p>

<p>You can have user configurable texts in scripts that work just like irssi&#39;s internal texts that can be changed in themes.</p>

<p>First you&#39;ll have to register the formats:</p>

<p>Irssi::theme_register([ &#39;format_name&#39;, &#39;{hilight my perl format!}&#39;, &#39;format2&#39;, &#39;testing.. nick = $0, channel = $1&#39; ]);</p>

<p>Printing happens with one of the functions:</p>

<p>printformat(level, format, ...) Window::printformat(level, format, ...) Server::printformat(target, level, format, ...) Windowitem::printformat(level, format, ...)</p>

<p>For example:</p>

<pre>  $channel-&#62;printformat(MSGLEVEL_CRAP, &#39;format2&#39;,
                        &#39;nick&#39;, $channel-&#62;{name});</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DCC"
>DCC</a></h2>

<p>See also <a href="./Irssi/Dcc.html" class="podlinkpod"
>Irssi::Dcc</a></p>

<p>Dcc dcc_find_item(type, nick, arg) Find DCC connection.</p>

<p>Dcc dcc_find_by_port(nick, port) Find DCC connection by port.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Channels"
>Channels</a></h2>

<p>Channel channel_find(channel) Find channel from any server.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Ignores"
>Ignores</a></h2>

<p>ignore_add_rec(ignore) Add ignore record.</p>

<p>ignore_update_rec(ignore) Update ignore record in configuration</p>

<p>ignore_check(nick, host, channel, text, level)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Logging"
>Logging</a></h2>

<p>Log log_create_rec(fname, level) Create log file.</p>

<p>Log log_find(fname) Find log with file name.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Raw_Logging"
>Raw Logging</a></h2>

<p>Rawlog rawlog_create() Create a new rawlog.</p>

<p>rawlog_set_size(lines) Set the default rawlog size for new rawlogs.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Chat-Nets"
>Chat-Nets</a></h2>

<p>chatnet_find(name) Find chat network with name.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Status_Bars"
>Status Bars</a></h2>

<p><b>TODO</b></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>All the content of this site is copyright &#169; 2000-2010 <a href="http://irssi.org" class="podlinkurl"
>The Irssi project</a>.</p>

<p>Formatting to POD and linking by Tom Feist <a href="mailto:shabble+irssi@metavore.org" class="podlinkurl"
>shabble+irssi@metavore.org</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
